<%- include('layouts/main') %>

<div class="max-w-4xl w-3/4 mx-auto mt-8 overflow-y-auto max-h-screen">
  <h1 class="text-3xl font-bold mb-6 text-blue-400">Chat History</h1>
  
  <% if (chats.length === 0) { %>
    <div class="bg-gray-800 rounded-lg shadow-lg p-6 text-center border border-gray-700">
      <p class="text-gray-400">No chat history yet. <a href="/" class="text-blue-400 hover:underline">Start a new chat</a>.</p>
    </div>
  <% } else { %>
    <div class="bg-gray-800 rounded-lg shadow-lg border border-gray-700">
      <ul class="divide-y divide-gray-700">
        <% chats.forEach(chat => { %>
          <li>
            <a href="/chat/<%= chat._id %>" class="block hover:bg-gray-700 p-4 transition">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-medium text-gray-100"><%= chat.title %></h3>
                  <p class="text-sm text-gray-400">Model: <%= chat.model %></p>
                  <p class="text-xs text-gray-500">
                    Created: <%= new Date(chat.createdAt).toLocaleString() %> | 
                    Last updated: <%= new Date(chat.updatedAt).toLocaleString() %>
                  </p>
                  <p class="text-xs text-gray-500 mt-1"><%= chat.messages.length %> messages</p>
                </div>
                <span class="text-blue-400">&rarr;</span>
              </div>
            </a>
          </li>
        <% }) %>
      </ul>
    </div>
  <% } %>
  
  <div class="mt-6">
    <a href="/" class="text-blue-400 hover:underline">&larr; Back to Home</a>
  </div>
</div>